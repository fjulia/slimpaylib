{"version":3,"sources":["auth.js","halIndex.js","index.js"],"names":["_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","request","require","Auth","options","this","app_name","app_secret","oauth_url","token","renovation_date","expires_in","next","_is_token_valid","_retrieve_token","err","Error","now","Date","callback","post","form","grant_type","scope","auth","user","pass","res","body","console","log","module","halIndex","links","url","global","sandbox_entrypoint_url","process","env","entrypoint_url","Slimpaylib","creditor_reference","do_auth"],"mappings":"AAAA,YAQA,SAAAA,iBAAAC,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAC,WAAA,qCCFA,QAAAH,iBAAAC,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAC,WAAA,qCCEA,QAAAH,iBAAAC,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAC,WAAA,qCFNAC,OAAAC,eAAAC,QAAA,cACAC,OAAA,GAGA,IAAAC,cAAA,WAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAE,OAAAD,IAAA,CAAA,GAAAE,GAAAH,EAAAC,EAAAE,GAAAC,WAAAD,EAAAC,aAAA,EAAAD,EAAAE,cAAA,EAAA,SAAAF,KAAAA,EAAAG,UAAA,GAAAb,OAAAC,eAAAK,EAAAI,EAAAI,IAAAJ,IAAA,MAAA,UAAAZ,EAAAiB,EAAAC,GAAA,MAAAD,IAAAV,EAAAP,EAAAmB,UAAAF,GAAAC,GAAAX,EAAAP,EAAAkB,GAAAlB,MAIAoB,QAAAC,QAAA,WAEAC,KAAA,WACA,QAAAA,GAAAC,GACAzB,gBAAA0B,KAAAF,GAEAE,KAAAC,SAAAF,EAAAE,SACAD,KAAAE,WAAAH,EAAAG,WACAF,KAAAG,UAAAJ,EAAAI,UACAH,KAAAI,SACAJ,KAAAK,gBAAA,EACAL,KAAAI,MAAAE,WAAA,EA6CA,MA1CAxB,cAAAgB,IACAN,IAAA,UACAX,MAAA,SAAA0B,GACAP,KAAAQ,kBASAD,IARAP,KAAAS,gBAAA,SAAAC,GACA,GAAAA,EACA,KAAA,IAAAC,OAAA,uBAEAJ,UAQAf,IAAA,kBACAX,MAAA,WACA,GAAA+B,GAAA,GAAAC,MAAA,GACA,OAAAD,GAAAZ,KAAAK,gBAAAL,KAAAI,MAAAE,cAGAd,IAAA,kBACAX,MAAA,SAAAiC,GACAlB,QAAAmB,KAAAf,KAAAG,WACAa,MACAC,WAAA,qBACAC,MAAA,OAEAC,MACAC,KAAApB,KAAAC,SACAoB,KAAArB,KAAAE,aAEA,SAAAQ,EAAAY,EAAAC,GACAC,QAAAC,IAAAF,GACAvB,KAAAI,MAAAmB,EACAvB,KAAAK,gBAAA,GAAAQ,MAAA,IACAC,EAAAJ,SAKAZ,IAGAlB,SAAAA,WAAAkB,KACA4B,OAAA9C,QAAAA,QAAA,WCpEAF,OAAAC,eAAAC,QAAA,cACAC,OAAA,GAKA,IAAAe,SAAAC,QAAA,WAEA8B,SAAA,QAAAA,KACArD,gBAAA0B,KAAA2B,GAEA3B,KAAA4B,QACA,IAAAC,GAAAC,OAAAC,sBACA,gBAAAC,QAAAC,IAAA,WACAJ,EAAAC,OAAAI,gBAIAtD,SAAAA,WAAA+C,SACAD,OAAA9C,QAAAA,QAAA,WCnBAF,OAAAC,eAAAC,QAAA,cACAC,OAAA,GAGA,IAAAC,cAAA,WAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAE,OAAAD,IAAA,CAAA,GAAAE,GAAAH,EAAAC,EAAAE,GAAAC,WAAAD,EAAAC,aAAA,EAAAD,EAAAE,cAAA,EAAA,SAAAF,KAAAA,EAAAG,UAAA,GAAAb,OAAAC,eAAAK,EAAAI,EAAAI,IAAAJ,IAAA,MAAA,UAAAZ,EAAAiB,EAAAC,GAAA,MAAAD,IAAAV,EAAAP,EAAAmB,UAAAF,GAAAC,GAAAX,EAAAP,EAAAkB,GAAAlB,MAIA2D,WAAA,WACA,QAAAA,GAAApC,GAGA,GAFAzB,gBAAA0B,KAAAmC,IAEApC,EAAA,KAAA,IAAAY,OAAA,sBACA,KAAAZ,EAAAE,SAAA,KAAA,IAAAU,OAAA,mBACA,KAAAZ,EAAAG,WAAA,KAAA,IAAAS,OAAA,qBACA,KAAAZ,EAAAqC,mBAAA,KAAA,IAAAzB,OAAA,6BACAX,MAAAmB,KAAA,GAAArB,MAAAC,GAYA,MATAjB,cAAAqD,IACA3C,IAAA,OACAX,MAAA,WACAmB,KAAAmB,KAAAkB,QAAA,WACAb,QAAAC,IAAA,kBAKAU,IAGAvD,SAAAA,WAAAuD,WACAT,OAAA9C,QAAAA,QAAA","file":"slimpaylib.min.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('request');\n\nvar Auth = function () {\n\tfunction Auth(options) {\n\t\t_classCallCheck(this, Auth);\n\n\t\tthis.app_name = options.app_name;\n\t\tthis.app_secret = options.app_secret;\n\t\tthis.oauth_url = options.oauth_url;\n\t\tthis.token = {};\n\t\tthis.renovation_date = 0;\n\t\tthis.token.expires_in = 0;\n\t}\n\n\t_createClass(Auth, [{\n\t\tkey: 'do_auth',\n\t\tvalue: function do_auth(next) {\n\t\t\tif (!this._is_token_valid()) {\n\t\t\t\tthis._retrieve_token(function (err) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tthrow new Error('Authentication error');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: '_is_token_valid',\n\t\tvalue: function _is_token_valid() {\n\t\t\tvar now = new Date() / 1000;\n\t\t\treturn now < this.renovation_date + this.token.expires_in;\n\t\t}\n\t}, {\n\t\tkey: '_retrieve_token',\n\t\tvalue: function _retrieve_token(callback) {\n\t\t\trequest.post(this.oauth_url, {\n\t\t\t\tform: {\n\t\t\t\t\tgrant_type: 'client_credentials',\n\t\t\t\t\tscope: 'api'\n\t\t\t\t},\n\t\t\t\tauth: {\n\t\t\t\t\tuser: this.app_name,\n\t\t\t\t\tpass: this.app_secret\n\t\t\t\t}\n\t\t\t}, function (err, res, body) {\n\t\t\t\tconsole.log(body);\n\t\t\t\tthis.token = body;\n\t\t\t\tthis.renovation_date = new Date() / 1000;\n\t\t\t\tcallback(err);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Auth;\n}();\n\nexports.default = Auth;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = require('request');\n\nvar halIndex = function halIndex() {\n\t_classCallCheck(this, halIndex);\n\n\tthis.links = {};\n\tvar url = global.sandbox_entrypoint_url;\n\tif (process.env['NODE_ENV'] === 'production') {\n\t\turl = global.entrypoint_url;\n\t}\n};\n\nexports.default = halIndex;\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Slimpaylib = function () {\n  function Slimpaylib(options) {\n    _classCallCheck(this, Slimpaylib);\n\n    if (!options) throw new Error(\"Missing credentials\");\n    if (!options.app_name) throw new Error(\"Missing app_name\");\n    if (!options.app_secret) throw new Error(\"Missing app_secret\");\n    if (!options.creditor_reference) throw new Error(\"Missing creditor_reference\");\n    this.auth = new Auth(options);\n  }\n\n  _createClass(Slimpaylib, [{\n    key: \"test\",\n    value: function test() {\n      this.auth.do_auth(function () {\n        console.log(\"test end\");\n      });\n    }\n  }]);\n\n  return Slimpaylib;\n}();\n\nexports.default = Slimpaylib;\nmodule.exports = exports[\"default\"];"],"sourceRoot":"/source/"}