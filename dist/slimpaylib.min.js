"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),request=require("request"),Auth=function(){function e(t){_classCallCheck(this,e),this.app_name=t.app_name,this.app_secret=t.app_secret,this.oauth_url=t.oauth_url,this.token={},this.renovation_date=0,this.token.expires_in=0}return _createClass(e,[{key:"do_auth",value:function(e){this._is_token_valid()?e():this._retrieve_token(function(t){if(t)throw new Error("Authentication error");e()})}},{key:"_is_token_valid",value:function(){var e=new Date/1e3;return e<this.renovation_date+this.token.expires_in}},{key:"_retrieve_token",value:function(e){request.post(this.oauth_url,{form:{grant_type:"client_credentials",scope:"api"},auth:{user:this.app_name,pass:this.app_secret}},function(t,r,n){console.log(n),this.token=n,this.renovation_date=new Date/1e3,e(t)})}}]),e}();exports["default"]=Auth,module.exports=exports["default"],Object.defineProperty(exports,"__esModule",{value:!0});var request=require("request"),halIndex=function e(){_classCallCheck(this,e),this.links={};var t=global.sandbox_entrypoint_url;"production"===process.env.NODE_ENV&&(t=global.entrypoint_url)};exports["default"]=halIndex,module.exports=exports["default"],Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Slimpaylib=function(){function e(t){if(_classCallCheck(this,e),!t)throw new Error("Missing credentials");if(!t.app_name)throw new Error("Missing app_name");if(!t.app_secret)throw new Error("Missing app_secret");if(!t.creditor_reference)throw new Error("Missing creditor_reference");this.auth=new Auth(t)}return _createClass(e,[{key:"test",value:function(){this.auth.do_auth(function(){console.log("test end")})}}]),e}();exports["default"]=Slimpaylib,module.exports=exports["default"];
//# sourceMappingURL=slimpaylib.min.js.map
